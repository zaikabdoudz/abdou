export default {
  command: ['طرد'],
  category: 'grupo',
  isAdmin: true,
  botAdmin: true,
  run: async (client, m, args, usedPrefix, command) => {
    if (!m.mentionedJid[0] && !m.quoted) {
      return m.reply('*《✧》ضع علامة على الشخص أو رد على رسالة الشخص الذي تريد حذفه.*')
    }
    let user = m.mentionedJid[0] ? m.mentionedJid[0] : m.quoted.sender
    const groupInfo = await client.groupMetadata(m.chat)
    const ownerGroup = groupInfo.owner || m.chat.split`-`[0] + '@s.whatsapp.net'
    const ownerBot = global.owner[0][0] + '@s.whatsapp.net'
    const participant = groupInfo.participants.find((p) => p.phoneNumber === user || p.jid === user || p.id === user || p.lid === user)
    if (!participant) {
      return client.reply(m.chat, `《✧》 *@${user.split('@')[0]}* ya no está en el grupo.`, m, { mentions: [user] })
    }
    if (user === client.decodeJid(client.user.id)) {
      return m.reply('*《✧》 لا أستطيع حذف البوت من المجموعة.*')
    }
    if (user === ownerGroup) {
      return m.reply('*《✧》 لا أستطيع حذف مالك المجموعة.*')
    }
    if (user === ownerBot) {
      return m.reply('*《✧》 لا أستطيع حذف مالك البوت.*')
    }
    try {
      await client.groupParticipantsUpdate(m.chat, [user], 'remove')
      client.reply(m.chat, `✎ @${user.split('@')[0]} *eliminado* correctamente`, m, { mentions: [user] })
    } catch (e) {
      return m.reply(`> An unexpected error occurred while executing command *${usedPrefix + command}*. Please try again or contact support if the issue persists.\n> [Error: *${e.message}*]`)
    }
  },
};
