let handler = async (m, { conn, text }) => {
  // ูุงุนุฏุฉ ุงูุจูุงูุงุช
  const users = global.db && global.db.data && global.db.data.users
  if (!users) throw 'โ๏ธ ุฎุทุฃ: ูุงุนุฏุฉ ุงูุจูุงูุงุช ุบูุฑ ูุชููุฑุฉ.'

  // ุงุณุชุฎุฑุฌ ุงููุณุชุฎุฏู (ุฃูู ููุดู) ุฃู ุงููุณุชุฎุฏู ุงูููุชุจุณ
  const who =
    (m.mentionedJid && m.mentionedJid[0]) ||
    (m.quoted && m.quoted.sender)

  if (!who) throw 'โณ๏ธ ูู ูุถูู ูู ุจุนูู ุชุงุฌ ูููุณุชุฎุฏู ุฃู ุฑูุฏ ุนูู ุฑุณุงูุชู.'

  // ุชุฃูุฏ ูู ูุฌูุฏ ุตู ูููุณุชุฎุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
  if (!users[who]) {
    users[who] = { exp: 0 } // ุงุถู ุญููู ุงูุชุฑุงุถูุฉ ุญุณุจ ุญุงุฌุชู
  }

  // ุงุญุตู ุนูู ุงูุฑูู ูู ูุต ุงูุฃูุฑ (ูุฏุนู ุฅุฌุฑุงุก: .ุฏููุงุฑ @user 500 ุฃู .ุฏููุงุฑ 500)
  if (!text || !text.trim()) throw 'โณ๏ธ ูู ุจุฅุฏุฎุงู ุงููููุฉ ุงููุฑุงุฏ ุฅุถุงูุชูุง ูู ุงูุฏููุงุฑุงุช.'
  // ูุจุญุซ ุนู ุฃูู ุฑูู ุตุญูุญ ููุฌูุจ ูู ุงููุต
  const match = text.match(/-?\d+/)
  if (!match) throw '๐ข ููุท ุงูุฃุฑูุงู ูุณููุญ ุจูุง.'
  const value = parseInt(match[0])
  if (isNaN(value)) throw '๐ข ููุท ุงูุฃุฑูุงู ูุณููุญ ุจูุง.'
  if (value < 1) throw 'โณ๏ธ ุงูุญุฏ ุงูุฃุฏูู: 1'

  // ุฃุถู ุงููููุฉ
  users[who].exp = (users[who].exp || 0) + value

  // ุฑุณุงูุฉ ุชุฃููุฏ ููููุฑุณู
  await m.reply(`โก *ุชูุช ุงูุฅุถุงูุฉ ุจูุฌุงุญ*
โโโโโโโโโโโโโโโ
โข *ุงููุจูุบ:* ${value} ุฏููุงุฑ
โข *ุงูุนุถู:* @${who.split('@')[0]}
โโโโโโโโโโโโโโโ`)

  // ุฑุณุงูุฉ ุชุญูู/ุชูุจูู ููุดุฎุต ุงูููุณุชูุฏู (ุชุณุชุฎุฏู mentions)
  try {
    await conn.sendMessage(
      m.chat,
      { text: `โข ูู ุชูููุช \n\n *+${value}* ุงูุฏููุงุฑุงุชุ`, mentions: [who] },
      { quoted: m }
    )
  } catch (e) {
    // ุงุญุชูุงุทู ุฅู ูุงูุช ููุชุจุฉ ุงูุงุชุตุงูุงุช ูุง ุชุฏุนู sendMessage ุจูุฐุง ุงูุดูู
    try {
      await conn.sendFile(m.chat, Buffer.from(''), 'null', `โข ูู ุชูููุช \n\n *+${value}* ุงูุฏููุงุฑุงุชุ`, m)
    } catch (_) { /* ุชุฌุงูู */ }
  }
}

handler.help = ['addgold <@user>']
handler.tags = ['ุงูุชุตุงุฏ']
handler.command = ['ุฏููุงุฑ'] 
handler.rowner = true

export default handler