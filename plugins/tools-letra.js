// plugins/zakhrafa.js
// Ù‡Ø§Ù†Ø¯Ù„Ø± Ø²Ø®Ø±ÙØ© Ø§Ù„Ù†ØµÙˆØµ â€” ES Module
global.currentFontStyle = global.currentFontStyle || 1

const xStr = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','1','2','3','4','5','6','7','8','9','0']

const yStr = Object.freeze({
  1: ['á¥²','á‘²','á¥´','áƒ«','á¥±','ğ–¿','g','Ò»','Ñ–','È·','k','á¥£','m','á¥’','á¥†','â´','ğ—Š','r','s','ğ—','á¥™','á¥','á¥•','á¥Š','á¥¡','z','1','2','3','4','5','6','7','8','9','0'],
  2: ['á—©','á—·','á‘•','á—ª','á—´','á–´','á˜œ','á•¼','I','á’','K','á’ª','á—°','á‘','O','á‘­','á‘«','á–‡','Õ','T','á‘Œ','á¯','á—¯','á™­','Y','á˜”','1','2','3','4','5','6','7','8','9','0'],
  3: ['ğ—®','ğ—¯','ğ—°','ğ—±','ğ—²','ğ—³','ğ—´','ğ—µ','ğ—¶','ğ—·','ğ—¸','ğ—¹','ğ—º','ğ—»','ğ—¼','ğ—½','ğ—¾','ğ—¿','ğ˜€','ğ˜','ğ˜‚','ğ˜ƒ','ğ˜„','ğ˜…','ğ˜†','ğ˜‡','ğŸ­','ğŸ®','ğŸ¯','ğŸ°','ğŸ±','ğŸ²','ğŸ³','ğŸ´','ğŸµ','ğŸ¬'],
  4: ['á´€','Ê™','á´„','á´…','á´‡','êœ°','É¢','Êœ','Éª','á´Š','á´‹','ÊŸ','á´','É´','á´','á´˜','q','Ê€','êœ±','á´›','á´œ','á´ ','á´¡','x','Ê','á´¢','1','2','3','4','5','6','7','8','9','0'],
  5: ['ğ‘','ğ‘','ğ‘','ğ‘‘','ğ‘’','ğ‘“','ğ‘”','â„','ğ‘–','ğ‘—','ğ‘˜','ğ‘™','ğ‘š','ğ‘›','ğ‘œ','ğ‘','ğ‘','ğ‘Ÿ','ğ‘ ','ğ‘¡','ğ‘¢','ğ‘£','ğ‘¤','ğ‘¥','ğ‘¦','ğ‘§','1','2','3','4','5','6','7','8','9','0'],
  6: ['ğš','ğ›','ğœ','ğ','ğ','ğŸ','ğ ','ğ¡','ğ¢','ğ£','ğ¤','ğ¥','ğ¦','ğ§','ğ¨','ğ©','ğª','ğ«','ğ¬','ğ­','ğ®','ğ¯','ğ°','ğ±','ğ²','ğ³','ğŸ','ğŸ','ğŸ‘','ğŸ’','ğŸ“','ğŸ”','ğŸ•','ğŸ–','ğŸ—','ğŸ'],
  7: ['ğ’‚','ğ’ƒ','ğ’„','ğ’…','ğ’†','ğ’‡','ğ’ˆ','ğ’‰','ğ’Š','ğ’‹','ğ’Œ','ğ’','ğ’','ğ’','ğ’','ğ’‘','ğ’’','ğ’“','ğ’”','ğ’•','ğ’–','ğ’—','ğ’˜','ğ’™','ğ’š','ğ’›','1','2','3','4','5','6','7','8','9','0'],
  8: ['ğ™–','ğ™—','ğ™˜','ğ™™','ğ™š','ğ™›','ğ™œ','ğ™','ğ™','ğ™Ÿ','ğ™ ','ğ™¡','ğ™¢','ğ™£','ğ™¤','ğ™¥','ğ™¦','ğ™§','ğ™¨','ğ™©','ğ™ª','ğ™«','ğ™¬','ğ™­','ğ™®','ğ™¯','1','2','3','4','5','6','7','8','9','0'],
  9: ['ğšŠ','ğš‹','ğšŒ','ğš','ğš','ğš','ğš','ğš‘','ğš’','ğš“','ğš”','ğš•','ğš–','ğš—','ğš˜','ğš™','ğšš','ğš›','ğšœ','ğš','ğš','ğšŸ','ğš ','ğš¡','ğš¢','ğš£','ğŸ·','ğŸ¸','ğŸ¹','ğŸº','ğŸ»','ğŸ¼','ğŸ½','ğŸ¾','ğŸ¿','ğŸ¶'],
  10: ['ğ˜¢','ğ˜£','ğ˜¤','ğ˜¥','ğ˜¦','ğ˜§','ğ˜¨','ğ˜©','ğ˜ª','ğ˜«','ğ˜¬','ğ˜­','ğ˜®','ğ˜¯','ğ˜°','ğ˜±','ğ˜²','ğ˜³','ğ˜´','ğ˜µ','ğ˜¶','ğ˜·','ğ˜¸','ğ˜¹','ğ˜º','ğ˜»','1','2','3','4','5','6','7','8','9','0'],
  11: ['ğ–º','ğ–»','ğ–¼','ğ–½','ğ–¾','ğ–¿','ğ—€','ğ—','ğ—‚','ğ—ƒ','ğ—„','ğ—…','ğ—†','ğ—‡','ğ—ˆ','ğ—‰','ğ—Š','ğ—‹','ğ—Œ','ğ—','ğ—','ğ—','ğ—','ğ—‘','ğ—’','ğ—“','1','2','3','4','5','6','7','8','9','0'],
  12: ['ï½','ï½‚','ï½ƒ','ï½„','ï½…','ï½†','ï½‡','ï½ˆ','ï½‰','ï½Š','ï½‹','ï½Œ','ï½','ï½','ï½','ï½','ï½‘','ï½’','ï½“','ï½”','ï½•','ï½–','ï½—','ï½˜','ï½™','ï½š','ï¼‘','ï¼’','ï¼“','ï¼”','ï¼•','ï¼–','ï¼—','ï¼˜','ï¼™','ï¼'],
  13: ['áµƒ','áµ‡','á¶œ','áµˆ','áµ‰','á¶ ','áµ','Ê°','â±','Ê²','áµ','Ë¡','áµ','â¿','áµ’','áµ–','áµ ','Ê³','Ë¢','áµ—','áµ˜','áµ›','Ê·','Ë£','Ê¸','á¶»','Â¹','Â²','Â³','â´','âµ','â¶','â·','â¸','â¹','â°'],
  14: ['ğ–†','ğ–‡','ğ–ˆ','ğ–‰','ğ–Š','ğ–‹','ğ–Œ','ğ–','ğ–','ğ–','ğ–','ğ–‘','ğ–’','ğ–“','ğ–”','ğ–•','ğ––','ğ–—','ğ–˜','ğ–™','ğ–š','ğ–›','ğ–œ','ğ–','ğ–','ğ–Ÿ','1','2','3','4','5','6','7','8','9','0'],
  15: ['â’¶','â’·','â’¸','â’¹','â’º','â’»','â’¼','â’½','â’¾','â’¿','â“€','â“','â“‚','â“ƒ','â“„','â“…','â“†','â“‡','â“ˆ','â“‰','â“Š','â“‹','â“Œ','â“','â“','â“','â‘ ','â‘¡','â‘¢','â‘£','â‘¤','â‘¥','â‘¦','â‘§','â‘¨','â“ª'],
  16: ['ğŸ…','ğŸ…‘','ğŸ…’','ğŸ…“','ğŸ…”','ğŸ…•','ğŸ…–','ğŸ…—','ğŸ…˜','ğŸ…™','ğŸ…š','ğŸ…›','ğŸ…œ','ğŸ…','ğŸ…','ğŸ…Ÿ','ğŸ… ','ğŸ…¡','ğŸ…¢','ğŸ…£','ğŸ…¤','ğŸ…¥','ğŸ…¦','ğŸ…§','ğŸ…¨','ğŸ…©','1','2','3','4','5','6','7','8','9','0'],
  17: ['ğ“ª','ğ“«','ğ“¬','ğ“­','ğ“®','ğ“¯','ğ“°','ğ“±','ğ“²','ğ“³','ğ“´','ğ“µ','ğ“¶','ğ“·','ğ“¸','ğ“¹','ğ“º','ğ“»','ğ“¼','ğ“½','ğ“¾','ğ“¿','ğ”€','ğ”','ğ”‚','ğ”ƒ','1','2','3','4','5','6','7','8','9','0'],
  18: ['â“','â“‘','â“’','â““','â“”','â“•','â“–','â“—','â“˜','â“™','â“š','â“›','â“œ','â“','â“','â“Ÿ','â“ ','â“¡','â“¢','â“£','â“¤','â“¥','â“¦','â“§','â“¨','â“©','â‘ ','â‘¡','â‘¢','â‘£','â‘¤','â‘¥','â‘¦','â‘§','â‘¨','â“ª'],
  19: ['ğŸ„°','ğŸ„±','ğŸ„²','ğŸ„³','ğŸ„´','ğŸ„µ','ğŸ„¶','ğŸ„·','ğŸ„¸','ğŸ„¹','ğŸ„º','ğŸ„»','ğŸ„¼','ğŸ„½','ğŸ„¾','ğŸ„¿','ğŸ…€','ğŸ…','ğŸ…‚','ğŸ…ƒ','ğŸ…„','ğŸ……','ğŸ…†','ğŸ…‡','ğŸ…ˆ','ğŸ…‰','â‘ ','â‘¡','â‘¢','â‘£','â‘¤','â‘¥','â‘¦','â‘§','â‘¨','â“ª'],
  20: ['ğ•’','ğ•“','ğ•”','ğ••','ğ•–','ğ•—','ğ•˜','ğ•™','ğ•š','ğ•›','ğ•œ','ğ•','ğ•','ğ•Ÿ','ğ• ','ğ•¡','ğ•¢','ğ•£','ğ•¤','ğ•¥','ğ•¦','ğ•§','ğ•¨','ğ•©','ğ•ª','ğ•«','ğŸ™','ğŸš','ğŸ›','ğŸœ','ğŸ','ğŸ','ğŸŸ','ğŸ ','ğŸ¡','ğŸ˜'],
  21: ['ã€aã€‘','ã€bã€‘','ã€cã€‘','ã€dã€‘','ã€eã€‘','ã€fã€‘','ã€gã€‘','ã€hã€‘','ã€iã€‘','ã€jã€‘','ã€kã€‘','ã€lã€‘','ã€mã€‘','ã€nã€‘','ã€oã€‘','ã€pã€‘','ã€qã€‘','ã€rã€‘','ã€sã€‘','ã€tã€‘','ã€uã€‘','ã€vã€‘','ã€wã€‘','ã€xã€‘','ã€yã€‘','ã€z}','ã€1ã€‘','ã€2ã€‘','ã€3ã€‘','ã€4ã€‘','ã€5ã€‘','ã€6ã€‘','ã€7ã€‘','ã€8ã€‘','ã€9ã€‘','ã€0ã€‘']
})

global.style = function styles(text = '', style = global.currentFontStyle) {
  // ÙŠØ­ÙˆÙ„ Ø§Ù„Ù†Øµ Ø­Ø³Ø¨ Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ â€” ÙÙ‚Ø· Ù„Ù„Ø­Ø±ÙˆÙ a-z ÙˆØ§Ù„Ø£Ø±Ù‚Ø§Ù…
  try {
    const replacer = xStr.map((v, i) => ({ original: v, convert: (yStr[style] && yStr[style][i]) || v }))
    return text.toString().toLowerCase().split('').map(ch => {
      const r = replacer.find(x => x.original === ch)
      return r ? r.convert : ch
    }).join('')
  } catch (e) {
    return text
  }
}

const styleNames = {
  1: 'Ø®Ø· Ù†Ø§Ø¹Ù…',
  2: 'Ø³ÙŠØ±ÙŠÙ Ù…Ø²Ø®Ø±Ù ÙƒØ¨ÙŠØ±',
  3: 'Ø®Ø· Ø³Ù…ÙŠÙƒ',
  4: 'Ø­Ø±ÙˆÙ ØµØºÙŠØ±Ø©',
  5: 'Ø®Ø· Ù…Ø§Ø¦Ù„ Ø±ÙŠØ§Ø¶ÙŠ',
  6: 'Ø®Ø· Ø³Ù…ÙŠÙƒ Ø±ÙŠØ§Ø¶ÙŠ',
  7: 'Ø®Ø· ÙƒØ§Ù„ÙŠØºØ±Ø§ÙÙŠ',
  8: 'Ø®Ø· Ø£Ø­Ø§Ø¯ÙŠ Ø³Ù…ÙŠÙƒ',
  9: 'Ø®Ø· Ø¹Ø§Ø¯ÙŠ Ø£Ø­Ø§Ø¯ÙŠ',
  10: 'Ø®Ø· Ù…Ø§Ø¦Ù„ Ø³Ø§Ù†Ø³',
  11: 'Ø®Ø· Ø±ÙŠØ§Ø¶ÙŠ Ø¹Ø§Ø¯ÙŠ',
  12: 'Ø®Ø· ÙƒØ§Ù…Ù„ Ø§Ù„Ø¹Ø±Ø¶',
  13: 'Ø­Ø±ÙˆÙ ÙÙˆÙ‚ÙŠØ©',
  14: 'Ø®Ø· Ù‚ÙˆØ·ÙŠ Ø³Ù…ÙŠÙƒ',
  15: 'Ø­Ø±ÙˆÙ Ø¯Ø§Ø¦Ø±ÙŠØ© ÙƒØ¨ÙŠØ±Ø©',
  16: 'Ø­Ø±ÙˆÙ Ø¯Ø§Ø®Ù„ Ù…Ø±Ø¨Ø¹Ø§Øª',
  17: 'Ø®Ø· ÙƒØ§Ù„ÙŠØºØ±Ø§ÙÙŠ Ù…Ø§Ø¦Ù„',
  18: 'Ø­Ø±ÙˆÙ Ø¯Ø§Ø¦Ø±ÙŠØ© ØµØºÙŠØ±Ø©',
  19: 'Ø®Ø· ÙƒØ¨ÙŠØ± Ù…ÙˆØ­Ø¯',
  20: 'Ø®Ø· ÙØ±ÙƒØªÙˆØ±',
  21: 'Ø­Ø±ÙˆÙ Ø¨ÙŠÙ† Ø£Ù‚ÙˆØ§Ø³'
}

async function handler(m, { conn, text = '', command = '' }) {
  try {
    const cmd = (command || '').toLowerCase()
    // ØªÙØ¹ÙŠÙ„ Ø±Ø¯Ø© Ø§Ù„ÙØ¹Ù„ Ø¥Ù† ÙƒØ§Ù† Ù…ØªØ§Ø­Ø§Ù‹
    if (m && typeof m.react === 'function') {
      try { await m.react('ğŸ•“') } catch {}
    }

    // Ø£Ù…Ø±: Ø²Ø®Ø±Ù / Ø²Ø®Ø±ÙØ©  => ÙŠØ­ÙˆÙ‘Ù„ Ø§Ù„Ù†Øµ Ø¨Ø§Ù„Ø®Ø· Ø§Ù„Ø­Ø§Ù„ÙŠ
    if (['Ø²Ø®Ø±Ù', 'Ø²Ø®Ø±ÙØ©'].includes(cmd)) {
      if (!text) {
        // Ø¹Ø±Ø¶ Ø¯Ù„ÙŠÙ„ Ø³Ø±ÙŠØ¹ Ùˆ Ø£Ù…Ø«Ù„Ø© Ù„ÙƒÙ„ Ø®Ø·
        let list = Object.keys(yStr).map(n => {
          const ex = global.style('ARTHUR', parseInt(n))
          const name = styleNames[n] || n
          return `â€ *${n} â€” ${name}*\n> Ù…Ø«Ø§Ù„: ${ex}`
        }).join('\n\n')
        return conn.reply(m.chat, `â€ Ø§Ø³ØªØ®Ø¯Ù…: ${cmd} <Ù†Øµ>\nâ€ Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ø®Ø·: Ø§ÙƒØªØ¨: Ø±Ù‚Ù… <Ø±Ù‚Ù…>\n\nâ€ Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ù…ØªØ§Ø­Ø©:\n\n${list}`, m)
      }
      const result = global.style(text, global.currentFontStyle)
      return conn.reply(m.chat, `â€ Ø§Ù„Ù†ØªÙŠØ¬Ø© (Ø§Ù„Ø®Ø· Ø§Ù„Ø­Ø§Ù„ÙŠ: ${global.currentFontStyle} â€” ${styleNames[global.currentFontStyle] || ''}):\n\n${result}`, m)
    }

    // Ø£Ù…Ø±: style Ø£Ùˆ letra => ØªØºÙŠÙŠØ± Ø®Ø· Ø§ÙØªØ±Ø§Ø¶ÙŠ
    if (['style', 'Ø±Ù‚Ù…'].includes(cmd)) {
      if (!text) return conn.reply(m.chat, 'â€ Ù…Ù† ÙØ¶Ù„ÙƒØŒ Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø®Ø· Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯Ù‡. Ù…Ø«Ø§Ù„: Ø±Ù‚Ù… 3', m)
      const num = parseInt(text.trim())
      if (!num || !yStr[num]) return conn.reply(m.chat, `â€ Ø§Ù„Ø±Ù‚Ù… ØºÙŠØ± ØµØ§Ù„Ø­. Ø§Ø®ØªØ± Ù…Ù† 1 Ø¥Ù„Ù‰ ${Object.keys(yStr).length}.`, m)
      global.currentFontStyle = num
      const example = global.style('ARTHUR IS HERE', num)
      return conn.reply(m.chat, `â€ ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ø®Ø· Ø¥Ù„Ù‰ *(${num}) ${styleNames[num] || ''}*.\n> Ù…Ø«Ø§Ù„: ${example}`, m)
    }

  } catch (e) {
    console.error(e)
    return conn.reply(m.chat, 'â€ Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ Ø£Ø«Ù†Ø§Ø¡ Ø²Ø®Ø±ÙØ© Ø§Ù„Ù†Øµ. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­.', m)
  }
}

handler.help = ['Ø²Ø®Ø±Ù <Ù†Øµ>', 'Ø²Ø®Ø±ÙØ© <Ù†Øµ>', 'style <Ø±Ù‚Ù…>', 'Ø±Ù‚Ù… <Ø±Ù‚Ù…>']
handler.tags = ['fun']
handler.command = ['Ø²Ø®Ø±Ù', 'Ø²Ø®Ø±ÙØ©', 'style', 'Ø±Ù‚Ù…']

export default handler